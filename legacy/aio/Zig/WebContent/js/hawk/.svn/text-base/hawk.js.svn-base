var deviceapis=new Object();deviceapis.pim=new Object();deviceapis._isReady=false;deviceapis._utils=new Object();deviceapis._version="9.0.1-16.0.2 (201310240900)";deviceapis.ready=function(a){deviceapis.ready._callback=a;if(deviceapis._isReady){deviceapis.ready._callback();}};deviceapis._setReady=function(){deviceapis._isReady=true;if(deviceapis.ready._callback!=undefined){deviceapis.ready._callback();}};function Error(a,b){this.type=a;this.message=b;}deviceapis._calls=new Object();deviceapis._calls.queue=new Array();function callDeviceAPI(a,b){if((deviceapis.browserinfo.userAgent.indexOf("iPhone")>=0)||(deviceapis.browserinfo.userAgent.indexOf("iPad")>=0)||(deviceapis.browserinfo.userAgent.indexOf("Android")>=0)){deviceapis._calls.add("stz://deviceAPI/"+a+"?"+b);}else{if(deviceapis.browserinfo.userAgent.indexOf("Windows Phone")>=0){deviceapis._calls.add("http://stz/deviceAPI/"+a+"?"+b);}else{if(deviceapis.browserinfo.userAgent.indexOf("BlackBerry")>=0){deviceapis._calls.add("stz:///deviceAPI/"+a+"?"+b);}else{if(deviceapis.browserinfo.userAgent.indexOf("Windows")>=0){deviceapis._calls.add("stz://deviceAPI/"+a+"?"+b);}else{console.error("Platform not supported.");}}}}}deviceapis._calls.add=function(a){deviceapis._calls.queue.push(a);if(deviceapis._calls.queue.length==1){document.location.href=a;}};deviceapis._calls.next=function(){deviceapis._calls.queue.splice(0,1);if(deviceapis._calls.queue.length>0){document.location.href=deviceapis._calls.queue[0];}};function UpdateInformation(b,c,a){this.version=b;this.mandatory=c;this.release=a;}deviceapis.application=new Object();deviceapis.application.id=null;deviceapis.application.version=null;deviceapis.application.update=new Object();deviceapis.application.alert=new Object();deviceapis.application.confirm=new Object();deviceapis.application.getID=function(a){deviceapis.application.getID._callback=a;if(deviceapis.application.id==null){callDeviceAPI("APPLICATION","action=getID&callback=deviceapis.application._getID");}else{deviceapis.application.getID._callback(deviceapis.application.id);}};deviceapis.application._getID=function(a){deviceapis.application.id=a;deviceapis.application.getID._callback(deviceapis.application.id);};deviceapis.application.getVersion=function(a){deviceapis.application.getVersion._callback=a;if(deviceapis.application.version==null){callDeviceAPI("APPLICATION","action=getVersion&callback=deviceapis.application._getVersion");}else{deviceapis.application.getVersion._callback(deviceapis.application.version);}};deviceapis.application._getVersion=function(a){deviceapis.application.version=a;deviceapis.application.getVersion._callback(deviceapis.application.version);};deviceapis.application.update.checkAvailability=function(a,b){deviceapis.application.update.checkAvailability._onSuccessCallback=a;deviceapis.application.update.checkAvailability._onFailureCallback=b;callDeviceAPI("APPLICATION","action=checkUpdateAvailability&onSuccessCallback=deviceapis.application.update._checkAvailability&onFailureCallback=deviceapis.application.update._checkAvailabilityError");};deviceapis.application.update._checkAvailability=function(b,d,a){var c=new UpdateInformation(b,d=="true",a=="true");deviceapis.application.update.checkAvailability._onSuccessCallback(c);};deviceapis.application.update._checkAvailabilityError=function(a){if(deviceapis.application.update.checkAvailability._onFailureCallback){deviceapis.application.update.checkAvailability._onFailureCallback(a);}};deviceapis.application.update.download=function(a,b){deviceapis.application.update.download._onSuccessCallback=a;deviceapis.application.update.download._onFailureCallback=b;callDeviceAPI("APPLICATION","action=downloadUpdate&onSuccessCallback=deviceapis.application.update._download&onFailureCallback=deviceapis.application.update._downloadError");};deviceapis.application.update._download=function(){deviceapis.application.update.download._onSuccessCallback();};deviceapis.application.update._downloadError=function(a){if(deviceapis.application.update.download._onFailureCallback){deviceapis.application.update.download._onFailureCallback(a);}};deviceapis.application.update.apply=function(a,b){deviceapis.application.update.apply._onSuccessCallback=a;deviceapis.application.update.apply._onFailureCallback=b;callDeviceAPI("APPLICATION","action=applyUpdate&onSuccessCallback=deviceapis.application.update._apply&onFailureCallback=deviceapis.application.update._applyError");};deviceapis.application.update._apply=function(){deviceapis.application.update.apply._onSuccessCallback();};deviceapis.application.update._applyError=function(a){if(deviceapis.application.update.apply._onFailureCallback){deviceapis.application.update.apply._onFailureCallback(a);}};deviceapis.application.hideSplashScreen=function(){callDeviceAPI("APPLICATION","action=hideSplashScreen");};deviceapis.application.alert=function(c,b,a,d){deviceapis.application.alert.onButton1=d;callDeviceAPI("APPLICATION","action=showDialog&type=alert&title="+encodeURIComponent(c)+"&message="+encodeURIComponent(b)+"&button1Label="+encodeURIComponent(a)+"&onSuccessCallback=deviceapis.application.alert._onButton1");};deviceapis.application.alert._onButton1=function(){if(deviceapis.application.alert.onButton1!=undefined){deviceapis.application.alert.onButton1();}};deviceapis.application.confirm=function(e,c,a,b,d,f){deviceapis.application.confirm.onButton1=d;deviceapis.application.confirm.onButton2=f;callDeviceAPI("APPLICATION","action=showDialog&type=confirm&title="+encodeURIComponent(e)+"&message="+encodeURIComponent(c)+"&button1Label="+encodeURIComponent(a)+"&button2Label="+encodeURIComponent(b)+"&onSuccessCallback=deviceapis.application.confirm._onButton1&onCancelCallback=deviceapis.application.confirm._onButton2");};deviceapis.application.confirm._onButton1=function(){deviceapis.application.confirm.onButton1();};deviceapis.application.confirm._onButton2=function(){if(deviceapis.application.confirm.onButton2!=undefined){deviceapis.application.confirm.onButton2();}};deviceapis.application.listenBackKey=function(){callDeviceAPI("APPLICATION","action=listenBackKey");};deviceapis.application._dispatchEvent=function(b){var a=document.createEvent("Event");a.initEvent(b,true,true);document.dispatchEvent(a);};deviceapis.application.quit=function(){callDeviceAPI("APPLICATION","action=quit");};deviceapis.browserinfo=new Object();deviceapis.browserinfo={init:function(){this.browser=this.searchString(this.dataBrowser);if(this.browser==null){this.browser="an unknown browser";}this.version=this.searchVersion(navigator.userAgent);if(this.version==null){this.version=this.searchVersion(navigator.appVersion);if(this.version==null){this.version="an unknown version";}}this.OS=this.searchString(this.dataOS);if(this.OS==null){this.OS="an unknown OS";}this.userAgent=navigator.userAgent;},searchString:function(d){for(var a=0;a<d.length;a++){var b=d[a].string;var c=d[a].prop;this.versionSearchString=d[a].versionSearch||d[a].identity;if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity;}}else{if(c){return d[a].identity;}}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);if(a==-1){return;}return parseFloat(b.substring(a+this.versionSearchString.length+1));},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.platform,subString:"BlackBerry",identity:"BlackBerry"}]};deviceapis.browserinfo.init();deviceapis.browserinfo.isAndroid=deviceapis.browserinfo.userAgent.indexOf("Android")!=-1;deviceapis.browserinfo.isBlackberry=deviceapis.browserinfo.userAgent.indexOf("BlackBerry")!=-1;deviceapis.browserinfo.isiOS=(deviceapis.browserinfo.userAgent.indexOf("iPhone")!=-1)||(deviceapis.browserinfo.userAgent.indexOf("iPad")!=-1);deviceapis.browserinfo.isWindowsPhone=deviceapis.browserinfo.userAgent.indexOf("Windows Phone")!=-1;function Acceleration(b,a,c){this.xAxis=b;this.yAxis=a;this.zAxis=c;}function Accelerometer(){this.getCurrentAcceleration=function(a,b){this.onSuccessCallback=a;this.onFailureCallback=b;callDeviceAPI("ACCELEROMETER","action=get&onSuccessCallback=deviceapis.accelerometer._getCurrentAcceleration&onFailureCallback=deviceapis.accelerometer._getCurrentAccelerationError");},this._getCurrentAcceleration=function(a,c,b){if(this.onSuccessCallback!=null){this.onSuccessCallback(new Acceleration(a,c,b));}},this._getCurrentAccelerationError=function(){if(this.onFailureCallback!=null){this.onFailureCallback();}},this.watchAcceleration=function(b,c,a){this.id=deviceapis.accelerometer.watch.nextId;deviceapis.accelerometer.watch.nextId++;this.onSuccessCallback=b;this.onFailureCallback=c;this.minNotificationInterval=1000;if(a!=null){this.minNotificationInterval=a.minNotificationInterval;}this._watchAccelerationLoop();},this._watchAccelerationLoop=function(){callDeviceAPI("ACCELEROMETER","action=watch&id="+this.id+"&onSuccessCallback=deviceapis.accelerometer._watchAcceleration&onFailureCallback=deviceapis.accelerometer._watchAccelerationError");},this._watchAcceleration=function(a,c,b){if(this.onSuccessCallback!=null){this.onSuccessCallback(new Acceleration(a,c,b));}},this._watchAccelerationError=function(){if(this.onFailureCallback!=null){this.onFailureCallback();}},this.clearWatch=function(a){this.callback=a;callDeviceAPI("ACCELEROMETER","action=clear&id="+this.id+"&callback=deviceapis.accelerometer._clearWatch");},this._clearWatch=function(){this.callback();};}deviceapis.accelerometer=new Object();deviceapis.accelerometer.get=new Object();deviceapis.accelerometer.watch=new Object();deviceapis.accelerometer.watch.nextId=0;deviceapis.accelerometer.watch.accelerometers=new Array();deviceapis.accelerometer.getCurrentAcceleration=function(a,b){deviceapis.accelerometer.get.accelerometer=new Accelerometer();deviceapis.accelerometer.get.accelerometer.getCurrentAcceleration(a,b);};deviceapis.accelerometer._getCurrentAcceleration=function(a,c,b){deviceapis.accelerometer.get.accelerometer._getCurrentAcceleration(a,c,b);deviceapis.accelerometer.get.accelerometer=null;};deviceapis.accelerometer._getCurrentAccelerationError=function(){deviceapis.accelerometer.get.accelerometer._getCurrentAccelerationError();deviceapis.accelerometer.get.accelerometer=null;};deviceapis.accelerometer.watch._getIDIndex=function(b){for(var a=0;a<deviceapis.accelerometer.watch.accelerometers.length;a++){if(deviceapis.accelerometer.watch.accelerometers[a].id==b){return a;}}return -1;};deviceapis.accelerometer.watchAcceleration=function(b,d,a){var c=new Accelerometer();deviceapis.accelerometer.watch.accelerometers.push(c);c.watchAcceleration(b,d,a);return c.id;};deviceapis.accelerometer._watchAccelerationLoop=function(c){var a=deviceapis.accelerometer.watch._getIDIndex(c);if(a!=-1){var b=deviceapis.accelerometer.watch.accelerometers[a];b._watchAccelerationLoop();}};deviceapis.accelerometer._watchAcceleration=function(f,a,e,d){var b=deviceapis.accelerometer.watch._getIDIndex(f);if(b!=-1){var c=deviceapis.accelerometer.watch.accelerometers[b];c._watchAcceleration(a,e,d);setTimeout("deviceapis.accelerometer._watchAccelerationLoop("+c.id+")",c.minNotificationInterval);}};deviceapis.accelerometer._watchAccelerationError=function(c){var a=deviceapis.accelerometer.watch._getIDIndex(c);if(a!=-1){var b=deviceapis.accelerometer.watch.accelerometers[a];b._watchAccelerationError();deviceapis.accelerometer.watch.accelerometers.splice(a,1);}};deviceapis.accelerometer.clearWatch=function(d,c){var a=deviceapis.accelerometer.watch._getIDIndex(d);if(a!=-1){var b=deviceapis.accelerometer.watch.accelerometers[a];b.clearWatch(c);}};deviceapis.accelerometer._clearWatch=function(c){var a=deviceapis.accelerometer.watch._getIDIndex(c);if(a!=-1){var b=deviceapis.accelerometer.watch.accelerometers[a];b._clearWatch();deviceapis.accelerometer.watch.accelerometers.splice(a,1);}};deviceapis.augmentedreality=new Object();deviceapis.augmentedreality.launch=function(c,j){var a="";var e="";var f="";var g="";var h="";c=c.POIs;for(var d=0;d<c.length;d++){var b=c[d];if(d>0){a+=";";e+=";";f+=";";g+=";";h+=";";}a+=b.id;e+=b.label;f+=b.coordinates[0];g+=b.coordinates[1];h+=b.coordinates[2];}deviceapis.augmentedreality.launch._callback=j;callDeviceAPI("AUGMENTEDREALITY","ids="+encodeURIComponent(a)+"&labels="+encodeURIComponent(e)+"&latitudes="+f+"&longitudes="+g+"&altitudes="+h+"&callback=deviceapis.augmentedreality._launch");};deviceapis.augmentedreality._launch=function(a){deviceapis.augmentedreality.launch._callback(a);};function Barcode(b,a){this.text=b;this.type=a;}deviceapis.barcode=new Object();deviceapis.barcode.scan=function(a,b){deviceapis.barcode.scan._onSuccessCallback=a;deviceapis.barcode.scan._onFailureCallback=b;callDeviceAPI("BARCODE","onSuccessCallback=deviceapis.barcode._scan&onFailureCallback=deviceapis.barcode._scanError");};deviceapis.barcode._scan=function(c,b){var a=new Barcode(c,b);deviceapis.barcode.scan._onSuccessCallback(a);};deviceapis.barcode._scanError=function(){if(deviceapis.barcode.scan._onFailureCallback!=undefined){deviceapis.barcode.scan._onFailureCallback();}};deviceapis.pim.calendar=new Object();deviceapis.pim.calendar.findEvents=function(a,c,b){deviceapis.pim.calendar.findEvents._onSuccessCallback=a;deviceapis.pim.calendar.findEvents._onFailureCallback=c;callDeviceAPI("CALENDAR","onSuccessCallback=deviceapis.pim.calendar._findEvents&onFailureCallback=deviceapis.pim.calendar._findEventsError&filter="+encodeURI(JSON.stringify(b)));};deviceapis.pim.calendar._findEvents=function(b){var a=new Array();var c=JSON.parse(b);if((c!=null)&&(c.events!=null)){a=c.events;}deviceapis.pim.calendar.findEvents._onSuccessCallback(a);};deviceapis.pim.calendar._findEventsError=function(a){if(deviceapis.pim.calendar.findEvents._onFailureCallback!=undefined){deviceapis.pim.calendar.findEvents._onFailureCallback(a);}};function Picture(a,b){this.url=a;this.data=b;}deviceapis.camera=new Object();deviceapis.camera.captureImage=function(a,b){deviceapis.camera.captureImage._onSuccessCallback=a;deviceapis.camera.captureImage._onFailureCallback=b;callDeviceAPI("CAPTURE","onSuccessCallback=deviceapis.camera._captureImage&onFailureCallback=deviceapis.camera._captureImageError");};deviceapis.camera._captureImage=function(a,c){var b=new Picture(a,c);deviceapis.camera.captureImage._onSuccessCallback(b);};deviceapis.camera._captureImageError=function(a){if(deviceapis.camera.captureImage._onFailureCallback!=undefined){deviceapis.camera.captureImage._onFailureCallback(a);}};function Contact(d,b,c,f,a,e){this.firstName=d;this.secondName=b;this.lastName=c;this.organizationName=f;this.phoneNumbers=a;this.emails=e;this.toJSON=function(){return'{"firstName":"'+d+'","secondName":"'+b+'","lastName":"'+c+'","organizationName":"'+f+'","phoneNumbers":"'+a+'","emails":"'+e+'"}';};}deviceapis.pim.contact=new Object();deviceapis.pim.contact.findContacts=function(a,c,b){deviceapis.pim.contact.filter=b;deviceapis.pim.contact.findContacts._onSuccessCallback=a;deviceapis.pim.contact.findContacts._onFailureCallback=c;callDeviceAPI("CONTACTS","action=find&onSuccessCallback=deviceapis.pim.contact._findContacts&onFailureCallback=deviceapis.pim.contact._findContactsError");};deviceapis.pim.contact._findContacts=function(d){var c=new Array();var f=JSON.parse(d);if((f!=null)&&(f.contacts!=null)){c=f.contacts;}var e=new Array();var b=deviceapis.pim.contact.filter;if((b==null)||(b=="undefined")){e=c;}else{for(var a=0;a<c.length;a++){if((deviceapis._utils.matchFilter(c[a].firstName,b.firstName))&&(deviceapis._utils.matchFilter(c[a].secondName,b.secondName))&&(deviceapis._utils.matchFilter(c[a].lastName,b.lastName))&&(deviceapis._utils.matchFilter(c[a].organizationName,b.organizationName))&&(deviceapis._utils.matchFilterInList(c[a].phoneNumbers,"number",b.phoneNumber))&&(deviceapis._utils.matchFilterInList(c[a].emails,"email",b.email))){e.push(c[a]);}}}deviceapis.pim.contact.findContacts._onSuccessCallback(e);};deviceapis.pim.contact._findContactsError=function(a){if(deviceapis.pim.contact.findContacts._onFailureCallback!=undefined){deviceapis.pim.contact.findContacts._onFailureCallback(a);}};deviceapis.pim.contact.createContact=function(f){var d="";var b="";var c="";var e="";var a=[];var g=[];if(f.firstName!=undefined){d=f.firstName;}if(f.secondName!=undefined){b=f.secondName;}if(f.lastName!=undefined){c=f.lastName;}if(f.companyName!=undefined){e=f.companyName;}if(f.phoneNumbers!=undefined){a=f.phoneNumbers;}if(f.emails!=undefined){g=f.emails;}return new Contact(d,b,c,e,a,g);};deviceapis.pim.contact.addContact=function(a,b,c){deviceapis.pim.contact.addContact._onSuccessCallback=b;deviceapis.pim.contact.addContact._onFailureCallback=c;callDeviceAPI("CONTACTS","action=add&contact="+a.toJSON()+"&onSuccessCallback=deviceapis.pim.contact._addContact&onFailureCallback=deviceapis.pim.contact._addContactError");};deviceapis.pim.contact._addContact=function(){if(deviceapis.pim.contact.addContact._onSuccessCallback!=undefined){deviceapis.pim.contact.addContact._onSuccessCallback();}};deviceapis.pim.contact._addContactError=function(){if(deviceapis.pim.contact.addContact._onFailureCallback!=undefined){deviceapis.pim.contact.addContact._onFailureCallback();}};deviceapis.context=new Object();deviceapis.context.save=function(a,b,c){deviceapis.context.save._callback=c;callDeviceAPI("CONTEXT","action=save&name="+encodeURIComponent(a)+"&value="+encodeURIComponent(b)+"&callback=deviceapis.context._save");};deviceapis.context._save=function(){if(deviceapis.context.save._callback!=undefined){deviceapis.context.save._callback();}};deviceapis.context.load=function(a,b){deviceapis.context.load._callback=b;callDeviceAPI("CONTEXT","action=load&name="+encodeURIComponent(a)+"&callback=deviceapis.context._load");};deviceapis.context._load=function(value){eval("deviceapis.context.load._callback('"+deviceapis._utils.escapeString(decodeURI(value))+"')");};deviceapis.debug=new Object();function DebugConfiguration(a,b,e,d,c){this.status=a;this.persistence=b;this.level=e;this.maxlines=d;this.cleaning=c;}deviceapis.debug.getConfiguration=function(a){deviceapis.debug.getConfiguration._callback=a;callDeviceAPI("DEBUG","action=getConfiguration&callback=deviceapis.debug._getConfiguration");};deviceapis.debug._getConfiguration=function(a,b,e,d,c){if(deviceapis.debug.getConfiguration._callback!=undefined){deviceapis.debug.getConfiguration._callback(new DebugConfiguration(a,b,e,d,c));}};deviceapis.debug.setConfiguration=function(a,b,f,d,c,e){deviceapis.debug.setConfiguration._callback=e;callDeviceAPI("DEBUG","action=setConfiguration&status="+a+"&persistence="+b+"&level="+f+"&maxlines="+d+"&cleaning="+c+"&callback=deviceapis.debug._setConfiguration");};deviceapis.debug._setConfiguration=function(){if(deviceapis.debug.setConfiguration._callback!=undefined){deviceapis.debug.setConfiguration._callback();}};deviceapis.debug.start=function(a){deviceapis.debug.start._callback=a;callDeviceAPI("DEBUG","action=start&callback=deviceapis.debug._start");};deviceapis.debug._start=function(){if(deviceapis.debug.start._callback!=undefined){deviceapis.debug.start._callback();}};deviceapis.debug.stop=function(a){deviceapis.debug.stop._callback=a;callDeviceAPI("DEBUG","action=stop&callback=deviceapis.debug._stop");};deviceapis.debug._stop=function(){if(deviceapis.debug.stop._callback!=undefined){deviceapis.debug.stop._callback();}};deviceapis.debug.load=function(a){deviceapis.debug.load._callback=a;callDeviceAPI("DEBUG","action=load&callback=deviceapis.debug._load");};deviceapis.debug._load=function(c){if(deviceapis.debug.load._callback!=undefined){var a=new Array();var b=JSON.parse(c);if((b!=null)&&(b.logs!=null)){a=b.logs;}deviceapis.debug.load._callback(a);}};deviceapis.debug.clean=function(a){deviceapis.debug.clean._callback=a;callDeviceAPI("DEBUG","action=clean&callback=deviceapis.debug._clean");};deviceapis.debug._clean=function(){if(deviceapis.debug.clean._callback!=undefined){deviceapis.debug.clean._callback();}};deviceapis.debug.post=function(a,b){deviceapis.debug.post._onSuccessCallback=a;deviceapis.debug.post._onFailureCallback=b;callDeviceAPI("DEBUG","action=post&onSuccessCallback=deviceapis.debug._post&onFailureCallback=deviceapis.debug._postError");};deviceapis.debug._post=function(){if(deviceapis.debug.post._onSuccessCallback!=undefined){deviceapis.debug.post._onSuccessCallback();}};deviceapis.debug._postError=function(){if(deviceapis.debug.post._onFailureCallback!=undefined){deviceapis.debug.post._onFailureCallback();}};function DeviceInformation(g,c,e,d,f,a,b){this.brand=g;this.model=c;this.os=e;this.screenWidth=d;this.screenHeight=f;this.translucentAreaWidth=a;this.translucentAreaHeight=b;}function DeviceIDs(b,a){this.udid=b;this.usid=a;}deviceapis.device=new Object();deviceapis.device._properties=null;deviceapis.device._ids=null;deviceapis.device.getProperties=function(a){deviceapis.device.getProperties._callback=a;callDeviceAPI("DEVICE","action=getProperties&callback=deviceapis.device._getProperties");};deviceapis.device._getProperties=function(g,c,e,d,f,a,b){deviceapis.device._properties=new DeviceInformation(g,c,e,d,f,a,b);deviceapis.device.getProperties._callback(deviceapis.device._properties);};deviceapis.device.getIDs=function(a){deviceapis.device.getIDs._callback=a;if(deviceapis.device._ids==null){callDeviceAPI("DEVICE","action=getIDs&callback=deviceapis.device._getIDs");}else{deviceapis.device.getIDs._callback(deviceapis.device._ids);}};deviceapis.device._getIDs=function(b,a){deviceapis.device._ids=new DeviceIDs(b,a);deviceapis.device.getIDs._callback(deviceapis.device._ids);};deviceapis.deviceinteraction=new Object();deviceapis.deviceinteraction.call=function(b,a,c){deviceapis.deviceinteraction.call._onSuccessCallback=a;deviceapis.deviceinteraction.call._onFailureCallback=c;callDeviceAPI("CALL","number="+encodeURIComponent(b)+"&onSuccessCallback=deviceapis.deviceinteraction._call&onFailureCallback=deviceapis.deviceinteraction._callError");};deviceapis.deviceinteraction._call=function(){if(deviceapis.deviceinteraction.call._onSuccessCallback!=undefined){deviceapis.deviceinteraction.call._onSuccessCallback();}};deviceapis.deviceinteraction._callError=function(a){if(deviceapis.deviceinteraction.call._onFailureCallback!=undefined){deviceapis.deviceinteraction.call._onFailureCallback(a);}};deviceapis.deviceinteraction.startVibrate=function(a){if(a==undefined){a="";}callDeviceAPI("VIBRATE","action=start&duration="+a);};deviceapis.deviceinteraction.stopVibrate=function(){callDeviceAPI("VIBRATE","action=stop");};deviceapis.deviceinteraction.mute=function(){callDeviceAPI("VOLUME","action=off");};deviceapis.deviceinteraction.unmute=function(){callDeviceAPI("VOLUME","action=on");};deviceapis.deviceinteraction.increaseVolume=function(){callDeviceAPI("VOLUME","action=up");};deviceapis.deviceinteraction.decreaseVolume=function(){callDeviceAPI("VOLUME","action=down");};function EngineInformation(a,b){this.version=a;this.HAWKversion=b;}deviceapis._engine=new Object();deviceapis._engine._properties=null;deviceapis._engine.version="x.y.z";deviceapis._engine.HAWKversion="a.b.c";deviceapis._engine.getProperties=function(a){deviceapis._engine.getProperties._callback=a;if(deviceapis._engine._properties==null){callDeviceAPI("ENGINE","jslibversion="+deviceapis._version+"&callback=deviceapis._engine._getProperties");}else{deviceapis._engine.getProperties._callback(deviceapis._engine._properties);}};deviceapis._engine._getProperties=function(a,b){deviceapis._engine.version=a;deviceapis._engine.HAWKversion=b;deviceapis._engine._properties=new EngineInformation(a,b);deviceapis._engine.getProperties._callback(deviceapis._engine._properties);};deviceapis.listAvailableFeatures=function(a){deviceapis.listAvailableFeatures._callback=a;callDeviceAPI("FEATURES","callback=deviceapis._listAvailableFeatures");};deviceapis._listAvailableFeatures=function(c){var b=new Array();var a=JSON.parse(c);if((a!=null)&&(a.features!=null)){b=a.features;}deviceapis.listAvailableFeatures._callback(b);};deviceapis.filesystem=new Object();deviceapis.filesystem.objects=[];deviceapis.filesystem.wacVirtualRoots=["documents","images","music","videos","downloads","wgt-package","wgt-private","wgt-private-tmp","removable"];deviceapis.filesystem.upload=function(c,d,a,b,e){deviceapis.filesystem.upload._onSuccessCallback=b;deviceapis.filesystem.upload._onFailureCallback=e;callDeviceAPI("UPLOAD","file="+c+"&type="+d+"&destination="+a+"&onSuccessCallback=deviceapis.filesystem._upload&onFailureCallback=deviceapis.filesystem._uploadError");};deviceapis.filesystem._upload=function(){if(deviceapis.filesystem.upload._onSuccessCallback!=undefined){deviceapis.filesystem.upload._onSuccessCallback();}};deviceapis.filesystem._uploadError=function(){if(deviceapis.filesystem.upload._onFailureCallback!=undefined){deviceapis.filesystem.upload._onFailureCallback();}};deviceapis.filesystem.resolve=function(b,g,a,f){deviceapis.filesystem.resolve._onSuccessCallback=b;deviceapis.filesystem.resolve._onFailureCallback=g;deviceapis.filesystem.mode=f;if(!b||!a||!f){deviceapis.filesystem._resolveError("InvalidValuesError","resolve: Missing parameters");return;}if((f!="r")&&(f!="rw")){this._openStreamError(new Error("InvalidValuesError","resolve: Mode must be r or rw"));return;}var c=a.split("/");var d=c.shift();deviceapis.filesystem._recursiveResolvePath=c.join("/");var e="+"+deviceapis.filesystem.wacVirtualRoots.join("+")+"+";if(-1==e.indexOf("+"+d+"+")){deviceapis.filesystem._resolveError("NotFoundError","resolve: Invalid virtual root");return;}callDeviceAPI("FILESYSTEM","action=resolveRoot&location="+d+"&onSuccessCallback=deviceapis.filesystem._resolve&onFailureCallback=deviceapis.filesystem._resolveError");};deviceapis.filesystem._resolve=function(b){var a=new deviceapis.filesystem.File(JSON.parse(b),undefined,deviceapis.filesystem.mode);if(""!=deviceapis.filesystem._recursiveResolvePath){a.resolve(deviceapis.filesystem.resolve._onSuccessCallback,deviceapis.filesystem.resolve._onFailureCallback,deviceapis.filesystem._recursiveResolvePath,deviceapis.filesystem.mode);}else{deviceapis.filesystem.resolve._onSuccessCallback(a);}};deviceapis.filesystem._resolveError=function(a,b){if(deviceapis.filesystem.resolve._onFailureCallback){deviceapis.filesystem.resolve._onFailureCallback(new Error(a,b));}};deviceapis.filesystem.File=function(b,c,d){this.parent=c;if(d){this._mode=d;}else{this._mode=c._mode;}for(var a in b){this[a]=b[a];}if(this.created){this.created=new Date(this.created*1000);}if(this.modified){this.modified=new Date(this.modified*1000);}this._reference=deviceapis.filesystem.objects.length;deviceapis.filesystem.objects.push(this);};deviceapis.filesystem.File.prototype={toURI:function(){return this._uri;},listFiles:function(a,b,d){this._onSuccessCallback=a;this._onFailureCallback=b;this._filterDate=undefined;if(!a){this._listFilesError(new Error("InvalidValuesError","listFiles: Missing parameters"));return;}var c=null;if(d){c=d.name;this._filterDate=new Object();if(d.startModified){this._filterDate.startModified=d.startModified.getTime()/1000;}if(d.endModified){this._filterDate.endModified=d.endModified.getTime()/1000;}if(d.startCreated){this._filterDate.startCreated=d.startCreated.getTime()/1000;}if(d.endCreated){this._filterDate.endCreated=d.endCreated.getTime()/1000;}}deviceapis.filesystem.File.listFiles(this._reference,this.fullPath,c);},_listFiles:function(c){var b=[];for(var a in c){if(this._filterDate){if(c[a].created){if(this._filterDate.startCreated&&(c[a].created<this._filterDate.startCreated)){continue;}if(this._filterDate.endCreated&&(c[a].created>this._filterDate.endCreated)){continue;}}if(c[a].modified){if(this._filterDate.startModified&&(c[a].modified<this._filterDate.startModified)){continue;}if(this._filterDate.endModified&&(c[a].modified>this._filterDate.endModified)){continue;}}}b.push(new deviceapis.filesystem.File(c[a],this));}this._onSuccessCallback(b);},_listFilesError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},readAsText:function(a,b,c){this._onSuccessCallback=a;this._onFailureCallback=b;if(!a){this._readAsTextError(new Error("InvalidValuesError","readAsText: Missing parameters"));return;}if(!this.isFile){this._readAsTextError(new Error("IOError","readAsText: Not a file"));return;}if(c&&(c!="UTF-8")){this._readAsTextError(new Error("InvalidValuesError","readAsText: Only UTF-8 encoding is supported"));return;}if((this._mode!="r")&&(this._mode!="rw")){this._readAsTextError(new Error("SecurityError","readAsText: Not in read mode"));return;}deviceapis.filesystem.File.readAsText(this._reference,this.fullPath);},_readAsText:function(a){this._onSuccessCallback(a);},_readAsTextError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},openStream:function(a,b,d,c){this._onSuccessCallback=a;this._onFailureCallback=b;if(!a||!d){this._openStreamError(new Error("InvalidValuesError","openStream: Missing parameters"));return;}if(!this.isFile){this._openStreamError(new Error("IOError","openStream: Not a file"));return;}if(c&&(c!="UTF-8")){this._openStreamError(new Error("InvalidValuesError","openStream: Only UTF-8 encoding is supported"));return;}if((d!="r")&&(d!="w")&&(d!="a")){this._openStreamError(new Error("InvalidValuesError","openStream: Mode must be r, w or a"));return;}if(((d=="w")||(d=="a"))&&(this._mode!="rw")){this._openStreamError(new Error("SecurityError","openStream: Not in rw mode"));return;}this._fileStream=new deviceapis.filesystem.FileStream(this,d);deviceapis.filesystem.File.openStream(this._reference,this.fullPath,d);},_openStream:function(){this._onSuccessCallback(this._fileStream);},_openStreamError:function(a){this._fileStream=undefined;if(this._onFailureCallback){this._onFailureCallback(a);}},resolve:function(a,b,c){this._onSuccessCallback=a;this._onFailureCallback=b;if(!a||!c){this._resolveError(new Error("InvalidValuesError","resolve: Missing parameters"));return;}var e=c.split("/");var d=e.shift();this._recursiveResolvePath=e.join("/");deviceapis.filesystem.File.resolve(this._reference,this.fullPath,d);},_resolve:function(b){var a=new deviceapis.filesystem.File(b,this);if(""!=this._recursiveResolvePath){a.resolve(this._onSuccessCallback,this._onFailureCallback,this._recursiveResolvePath);}else{this._onSuccessCallback(a);}},_resolveError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},deleteDirectory:function(a,d,b,e){this._onSuccessCallback=a;this._onFailureCallback=d;if(!a||!b){this._deleteDirectoryError(new Error("InvalidValuesError","deleteDirectory: Missing parameters"));return;}if(!this.isDirectory){this._deleteDirectoryError(new Error("IOError","deleteDirectory: File object is not a directory"));return;}if(this._mode!="rw"){this._deleteDirectoryError(new Error("SecurityError","deleteDirectory: Not in rw mode"));return;}var c=this._getRelativePath(b);if(!c){this._deleteDirectoryError(new Error("InvalidValuesError","deleteDirectory: Directory is not under the current directory"));return;}deviceapis.filesystem.File.deleteDirectory(this._reference,this.fullPath,c,e);},_deleteDirectory:function(){this._onSuccessCallback();},_deleteDirectoryError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},deleteFile:function(a,c,d){this._onSuccessCallback=a;this._onFailureCallback=c;if(!a||!d){this._deleteFileError(new Error("InvalidValuesError","deleteFile: Missing parameters"));return;}if(!this.isDirectory){this._deleteFileError(new Error("IOError","deleteFile: File object is not a directory"));return;}if(this._mode!="rw"){this._deleteFileError(new Error("SecurityError","deleteFile: Not in rw mode"));return;}var b=this._getRelativePath(d);if(!b){this._deleteFileError(new Error("InvalidValuesError","deleteFile: File is not under the current directory"));return;}deviceapis.filesystem.File.deleteFile(this._reference,this.fullPath,b);},_deleteFile:function(){this._onSuccessCallback();},_deleteFileError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},copyTo:function(b,d,a,f,e){this._onSuccessCallback=b;this._onFailureCallback=d;if(!b||!a||!f||(undefined==e)){this.copyToError(new Error("InvalidValuesError","copyTo: Missing parameters"));return;}if(this._mode!="rw"){this.copyToError(new Error("SecurityError","copyTo: Not in rw mode"));return;}var c=this._getRelativePath(a);if(!c){this.copyToError(new Error("InvalidValuesError","copyTo: File or Directory is not under the current directory"));return;}deviceapis.filesystem.File.copyTo(this._reference,this.fullPath,c,f,e);},_copyTo:function(){this._onSuccessCallback();},_copyToError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},moveTo:function(b,d,a,f,e){this._onSuccessCallback=b;this._onFailureCallback=d;if(!b||!a||!f||(undefined==e)){this._moveToError(new Error("InvalidValuesError","moveTo: Missing parameters"));return;}if(this._mode!="rw"){this._moveToError(new Error("SecurityError","moveTo: Not in rw mode"));return;}var c=this._getRelativePath(a);if(!c){this._moveToError(new Error("InvalidValuesError","moveTo: File or Directory is not under the current directory"));return;}deviceapis.filesystem.File.moveTo(this._reference,this.fullPath,c,f,e);},_moveTo:function(){this._onSuccessCallback();},_moveToError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},uncompressTo:function(a,d,c,g,f,e){this._onSuccessCallback=a;this._onFailureCallback=d;if(!a||!c||!g||(undefined==f)){this._uncompressToError(new Error("InvalidValuesError","uncompressTo: Missing parameters"));return;}if(this._mode!="rw"){this._uncompressToError(new Error("SecurityError","uncompressTo: Not in rw mode"));return;}var b=this._getRelativePath(c);if(!b){this._uncompressToError(new Error("InvalidValuesError","uncompressTo: The zip file is not under the current directory"));return;}deviceapis.filesystem.File.uncompressTo(this._reference,this.fullPath,b,g,f);},_uncompressTo:function(){this._onSuccessCallback();},_uncompressToError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},createDirectory:function(a,b,c){this._onSuccessCallback=a;this._onFailureCallback=b;if(!a||!c){this._moveToError(new Error("createDirectory","createDirectory: Missing parameters"));return;}if(!this.isDirectory){this._createDirectoryError(new Error("IOError","createDirectory: Not a directory"));return;}if(this._mode!="rw"){this._createDirectoryError(new Error("SecurityError","createDirectory: Not in rw mode"));return;}deviceapis.filesystem.File.createDirectory(this._reference,this.fullPath,c);},_createDirectory:function(a){this.resolve(this._onSuccessCallback,this._onFailureCallback,a,"rw");},_createDirectoryError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},createFile:function(a,b,c){this._onSuccessCallback=a;this._onFailureCallback=b;if(!a||!c){this._moveToError(new Error("createDirectory","createFile: Missing parameters"));return;}if(!this.isDirectory){this._createDirectoryError(new Error("IOError","createFile: Not a directory"));return;}if(this._mode!="rw"){this._createDirectoryError(new Error("SecurityError","createFile: Not in rw mode"));return;}deviceapis.filesystem.File.createFile(this._reference,this.fullPath,c);},_createFile:function(a){this.resolve(this._onSuccessCallback,this._onFailureCallback,a,"rw");},_createFileError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},_getRelativePath:function(c){var a=null;var b=c.indexOf(this.fullPath);if(0==b){a=c.substring(this.fullPath.length+1);}return a;},_checkMode:function(a){}};deviceapis.filesystem.File.listFiles=function(c,b,a){var d="fileRef="+c+"&wacPath="+b+"&action=file_listFiles&onSuccessCallback=deviceapis.filesystem.File._listFiles&onFailureCallback=deviceapis.filesystem.File._listFilesError";if(a){d+="&filterName="+a;}callDeviceAPI("FILESYSTEM",d);};deviceapis.filesystem.File._listFiles=function(a,b){deviceapis.filesystem.objects[a]._listFiles(JSON.parse(b));};deviceapis.filesystem.File._listFilesError=function(a,b,c){deviceapis.filesystem.objects[a]._listFilesError(new Error(b,c));};deviceapis.filesystem.File.readAsText=function(b,a){callDeviceAPI("FILESYSTEM","fileRef="+b+"&wacPath="+a+"&action=file_readAsText&onSuccessCallback=deviceapis.filesystem.File._readAsText&onFailureCallback=deviceapis.filesystem.File._readAsTextError");};deviceapis.filesystem.File._readAsText=function(a,b){deviceapis.filesystem.objects[a]._readAsText(b);};deviceapis.filesystem.File._readAsTextError=function(a,b,c){deviceapis.filesystem.objects[a]._readAsTextError(new Error(b,c));};deviceapis.filesystem.File.openStream=function(b,a,c){callDeviceAPI("FILESYSTEM","fileRef="+b+"&wacPath="+a+"&action=file_openStream&mode="+c+"&onSuccessCallback=deviceapis.filesystem.File._openStream&onFailureCallback=deviceapis.filesystem.File._openStreamError");};deviceapis.filesystem.File._openStream=function(a){deviceapis.filesystem.objects[a]._openStream();};deviceapis.filesystem.File._openStreamError=function(a,b,c){deviceapis.filesystem.objects[a]._openStreamError(new Error(b,c));};deviceapis.filesystem.File.resolve=function(b,a,c){callDeviceAPI("FILESYSTEM","fileRef="+b+"&wacPath="+a+"&action=file_resolve&relativePath="+c+"&onSuccessCallback=deviceapis.filesystem.File._resolve&onFailureCallback=deviceapis.filesystem.File._resolveError");};deviceapis.filesystem.File._resolve=function(b,a){deviceapis.filesystem.objects[b]._resolve(JSON.parse(a));};deviceapis.filesystem.File._resolveError=function(a,b,c){deviceapis.filesystem.objects[a]._resolveError(new Error(b,c));};deviceapis.filesystem.File.deleteDirectory=function(d,c,a,b){callDeviceAPI("FILESYSTEM","fileRef="+d+"&wacPath="+c+"&action=file_deleteDirectory&relativePath="+a+"&recursive="+b+"&onSuccessCallback=deviceapis.filesystem.File._deleteDirectory&onFailureCallback=deviceapis.filesystem.File._deleteDirectoryError");};deviceapis.filesystem.File._deleteDirectory=function(a){deviceapis.filesystem.objects[a]._deleteDirectory();};deviceapis.filesystem.File._deleteDirectoryError=function(a,b,c){deviceapis.filesystem.objects[a]._deleteDirectoryError(new Error(b,c));};deviceapis.filesystem.File.deleteFile=function(b,a,c){callDeviceAPI("FILESYSTEM","fileRef="+b+"&wacPath="+a+"&action=file_deleteFile&relativePath="+c+"&onSuccessCallback=deviceapis.filesystem.File._deleteFile&onFailureCallback=deviceapis.filesystem.File._deleteFileError");};deviceapis.filesystem.File._deleteFile=function(a){deviceapis.filesystem.objects[a]._deleteFile();};deviceapis.filesystem.File._deleteFileError=function(a,b,c){deviceapis.filesystem.objects[a]._deleteFileError(new Error(b,c));};deviceapis.filesystem.File.copyTo=function(c,b,d,e,a){callDeviceAPI("FILESYSTEM","fileRef="+c+"&wacPath="+b+"&action=file_copyTo&relativePath="+d+"&destinationWacPath="+e+"&overwrite="+a+"&onSuccessCallback=deviceapis.filesystem.File._copyTo&onFailureCallback=deviceapis.filesystem.File._copyToError");};deviceapis.filesystem.File._copyTo=function(a){deviceapis.filesystem.objects[a]._copyTo();};deviceapis.filesystem.File._copyToError=function(a,b,c){deviceapis.filesystem.objects[a]._copyToError(new Error(b,c));};deviceapis.filesystem.File.moveTo=function(c,b,d,e,a){callDeviceAPI("FILESYSTEM","fileRef="+c+"&wacPath="+b+"&action=file_moveTo&relativePath="+d+"&destinationWacPath="+e+"&overwrite="+a+"&onSuccessCallback=deviceapis.filesystem.File._moveTo&onFailureCallback=deviceapis.filesystem.File._moveToError");};deviceapis.filesystem.File._moveTo=function(a){deviceapis.filesystem.objects[a]._moveTo();};deviceapis.filesystem.File._moveToError=function(a,b,c){deviceapis.filesystem.objects[a]._moveToError(new Error(b,c));};deviceapis.filesystem.File.uncompressTo=function(d,c,e,g,b,a){var f="fileRef="+d+"&wacPath="+c+"&action=file_uncompressTo&relativePath="+e+"&destinationWacPath="+g+"&overwrite="+b+"&onSuccessCallback=deviceapis.filesystem.File._uncompressTo&onFailureCallback=deviceapis.filesystem.File._uncompressToError";if(a){f+="&password="+a;}callDeviceAPI("FILESYSTEM",f);};deviceapis.filesystem.File._uncompressTo=function(a){deviceapis.filesystem.objects[a]._uncompressTo();};deviceapis.filesystem.File._uncompressToError=function(a,b,c){deviceapis.filesystem.objects[a]._uncompressToError(new Error(b,c));};deviceapis.filesystem.File.createDirectory=function(b,a,c){callDeviceAPI("FILESYSTEM","fileRef="+b+"&wacPath="+a+"&action=file_createDirectory&relativePath="+c+"&onSuccessCallback=deviceapis.filesystem.File._createDirectory&onFailureCallback=deviceapis.filesystem.File._createDirectoryError");};deviceapis.filesystem.File._createDirectory=function(b,a){deviceapis.filesystem.objects[b]._createDirectory(a);};deviceapis.filesystem.File._createDirectoryError=function(a,b,c){deviceapis.filesystem.objects[a]._createDirectoryError(new Error(b,c));};deviceapis.filesystem.File.createFile=function(b,a,c){callDeviceAPI("FILESYSTEM","fileRef="+b+"&wacPath="+a+"&action=file_createFile&relativePath="+c+"&onSuccessCallback=deviceapis.filesystem.File._createFile&onFailureCallback=deviceapis.filesystem.File._createFileError");};deviceapis.filesystem.File._createFile=function(b,a){deviceapis.filesystem.objects[b]._createFile(a);};deviceapis.filesystem.File._createFileError=function(a,b,c){deviceapis.filesystem.objects[a]._createFileError(new Error(b,c));};deviceapis.filesystem.FileStream=function(a,b){this._file=a;this._mode=b;this.eof=false;this.position=0;this.bytesAvailable=a.fileSize;if(this._mode=="a"){this.eof=true;this.position=a.fileSize;this.bytesAvailable=0;}};deviceapis.filesystem.FileStream.prototype={close:function(){this._file._fileStream=undefined;},read:function(a,c,b){this._onSuccessCallback=a;this._onFailureCallback=c;if(!this._file._fileStream){this._readError(new Error("InvalidValuesError","read: The file stream is closed"));return;}if(this._mode!="r"){this._readError(new Error("SecurityError","read: Not in r mode"));return;}if(!a||(undefined==b)){this._readError(new Error("InvalidValuesError","read: Missing parameters"));return;}deviceapis.filesystem.FileStream.read(this._file._reference,this._file.fullPath,this.position,b);},_read:function(a){this._onSuccessCallback(a);},_readError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},readBytes:function(a,b,c){this._onSuccessCallback=a;this._onFailureCallback=b;if(!this._file._fileStream){this._readError(new Error("InvalidValuesError","readBytes: The file stream is closed"));return;}if(this._mode!="r"){this._readError(new Error("SecurityError","readBytes: Not in r mode"));return;}if(!a||(undefined==c)){this._readError(new Error("InvalidValuesError","readBytes: Missing parameters"));return;}deviceapis.filesystem.FileStream.readBytes(this._file._reference,this._file.fullPath,this.position,c);},_readBytes:function(a){this._onSuccessCallback(a);},_readBytesError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},readBase64:function(a,b,c){this._onSuccessCallback=a;this._onFailureCallback=b;if(!this._file._fileStream){this._readError(new Error("InvalidValuesError","readBase64: The file stream is closed"));return;}if(this._mode!="r"){this._readError(new Error("SecurityError","readBase64: Not in r mode"));return;}if(!a||(undefined==c)){this._readError(new Error("InvalidValuesError","readBase64: Missing parameters"));return;}deviceapis.filesystem.FileStream.readBase64(this._file._reference,this._file.fullPath,this.position,c);},_readBase64:function(a){this._onSuccessCallback(a);},_readBase64Error:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},write:function(a,c,b){this._onSuccessCallback=a;this._onFailureCallback=c;if(!this._file._fileStream){this._readError(new Error("InvalidValuesError","write: The file stream is closed"));return;}if(this._mode!="w"&&this._mode!="a"){this._readError(new Error("SecurityError","write: Not in w or a mode"));return;}if(!a||(undefined==b)){this._readError(new Error("InvalidValuesError","write: Missing parameters"));return;}deviceapis.filesystem.FileStream.write(this._file._reference,this._file.fullPath,this.position,b);},_write:function(){this._onSuccessCallback();},_writeError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},writeBytes:function(a,b,c){this._onSuccessCallback=a;this._onFailureCallback=b;if(!this._file._fileStream){this._readError(new Error("InvalidValuesError","writeBytes: The file stream is closed"));return;}if(this._mode!="w"&&this._mode!="a"){this._readError(new Error("SecurityError","writeBytes: Not in w or a mode"));return;}if(!a||(undefined==c)){this._readError(new Error("InvalidValuesError","writeBytes: Missing parameters"));return;}deviceapis.filesystem.FileStream.writeBytes(this._file._reference,this._file.fullPath,this.position,c);},_writeBytes:function(){this._onSuccessCallback();},_writeBytesError:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},writeBase64:function(a,c,b){this._onSuccessCallback=a;this._onFailureCallback=c;if(!this._file._fileStream){this._readError(new Error("InvalidValuesError","writeBase64: The file stream is closed"));return;}if(this._mode!="w"&&this._mode!="a"){this._readError(new Error("SecurityError","writeBase64: Not in w or a mode"));return;}if(!a||(undefined==b)){this._readError(new Error("InvalidValuesError","writeBase64: Missing parameters"));return;}deviceapis.filesystem.FileStream.writeBase64(this._file._reference,this._file.fullPath,this.position,b);},_writeBase64:function(){this._onSuccessCallback();},_writeBase64Error:function(a){if(this._onFailureCallback){this._onFailureCallback(a);}},_updateAttributes:function(a,b){if(undefined!=b){this._file.fileSize=b;}this.position=a;this.bytesAvailable=this._file.fileSize-this.position;if(0==this.bytesAvailable){this.bytesAvailable=-1;this.eof=true;}else{this.eof=false;}}};deviceapis.filesystem.FileStream.read=function(d,c,a,b){callDeviceAPI("FILESYSTEM","fileRef="+d+"&wacPath="+c+"&action=fileStream_read&position="+a+"&count="+b+"&onSuccessCallback=deviceapis.filesystem.FileStream._read&onFailureCallback=deviceapis.filesystem.FileStream._readError");};deviceapis.filesystem.FileStream._read=function(c,a,b){deviceapis.filesystem.objects[c]._fileStream._updateAttributes(b);deviceapis.filesystem.objects[c]._fileStream._read(a);};deviceapis.filesystem.FileStream._readError=function(a,b,c){deviceapis.filesystem.objects[a]._fileStream._readError(new Error(b,c));};deviceapis.filesystem.FileStream.readBytes=function(c,b,a,d){callDeviceAPI("FILESYSTEM","fileRef="+c+"&wacPath="+b+"&action=fileStream_readBase64&position="+a+"&count="+d+"&onSuccessCallback=deviceapis.filesystem.FileStream._readBytes&onFailureCallback=deviceapis.filesystem.FileStream._readBytesError");};deviceapis.filesystem.FileStream._readBytes=function(c,a,b){deviceapis.filesystem.objects[c]._fileStream._updateAttributes(b);deviceapis.filesystem.objects[c]._fileStream._readBytes(deviceapis.utils.base64.decode(a));};deviceapis.filesystem.FileStream._readBytesError=function(a,b,c){deviceapis.filesystem.objects[a]._fileStream._readBytesError(new Error(b,c));};deviceapis.filesystem.FileStream.readBase64=function(c,b,a,d){callDeviceAPI("FILESYSTEM","fileRef="+c+"&wacPath="+b+"&action=fileStream_readBase64&position="+a+"&count="+d+"&onSuccessCallback=deviceapis.filesystem.FileStream._readBase64&onFailureCallback=deviceapis.filesystem.FileStream._readBase64Error");};deviceapis.filesystem.FileStream._readBase64=function(c,a,b){deviceapis.filesystem.objects[c]._fileStream._updateAttributes(b);deviceapis.filesystem.objects[c]._fileStream._readBase64(a);};deviceapis.filesystem.FileStream._readBase64Error=function(a,b,c){deviceapis.filesystem.objects[a]._fileStream._readBase64Error(new Error(b,c));};deviceapis.filesystem.FileStream.write=function(d,c,a,b){b=encodeURIComponent(b);callDeviceAPI("FILESYSTEM","fileRef="+d+"&wacPath="+c+"&action=fileStream_write&position="+a+"&data="+b+"&onSuccessCallback=deviceapis.filesystem.FileStream._write&onFailureCallback=deviceapis.filesystem.FileStream._writeError");};deviceapis.filesystem.FileStream._write=function(b,a,c){deviceapis.filesystem.objects[b]._fileStream._updateAttributes(a,c);deviceapis.filesystem.objects[b]._fileStream._write();};deviceapis.filesystem.FileStream._writeError=function(a,b,c){deviceapis.filesystem.objects[a]._fileStream._writeError(new Error(b,c));};deviceapis.filesystem.FileStream.writeBytes=function(d,c,a,e){var b=deviceapis.utils.base64.encode(e);callDeviceAPI("FILESYSTEM","fileRef="+d+"&wacPath="+c+"&action=fileStream_writeBase64&position="+a+"&data="+b+"&onSuccessCallback=deviceapis.filesystem.FileStream._writeBytes&onFailureCallback=deviceapis.filesystem.FileStream._writeBytesError");};deviceapis.filesystem.FileStream._writeBytes=function(b,a,c){deviceapis.filesystem.objects[b]._fileStream._updateAttributes(a,c);deviceapis.filesystem.objects[b]._fileStream._writeBytes();};deviceapis.filesystem.FileStream._writeBytesError=function(a,b,c){deviceapis.filesystem.objects[a]._fileStream._writeBytesError(new Error(b,c));};deviceapis.filesystem.FileStream.writeBase64=function(d,c,a,b){callDeviceAPI("FILESYSTEM","fileRef="+d+"&wacPath="+c+"&action=fileStream_writeBase64&position="+a+"&data="+b+"&onSuccessCallback=deviceapis.filesystem.FileStream._writeBytes&onFailureCallback=deviceapis.filesystem.FileStream._writeBytesError");};deviceapis.filesystem.FileStream._writeBase64=function(b,a,c){deviceapis.filesystem.objects[b]._fileStream._updateAttributes(a,c);deviceapis.filesystem.objects[b]._fileStream._writeBase64();};deviceapis.filesystem.FileStream._writeBase64Error=function(a,b,c){deviceapis.filesystem.objects[a]._fileStream._writeBase64Error(new Error(b,c));};function Position(f,g,a,c,b,e,d){this.coordinates=new Object();this.coordinates.longitude=f;this.coordinates.latitude=g;this.coordinates.altitude=a;this.coordinates.accuracy=c;this.coordinates.altitudeAccuracy=b;this.coordinates.heading="";this.coordinates.speed=e;this.timestamp=d;}function Geolocation(){this.getCurrentPosition=function(a,b){this.onSuccessCallback=a;this.onFailureCallback=b;callDeviceAPI("GEOLOCATION","action=get&onSuccessCallback=deviceapis.geolocation._getCurrentPosition&onFailureCallback=deviceapis.geolocation._getCurrentPositionError");},this._getCurrentPosition=function(f,g,a,c,b,e,d){if(this.onSuccessCallback!=null){this.onSuccessCallback(new Position(f,g,a,c,b,e,d));}},this._getCurrentPositionError=function(){if(this.onFailureCallback!=null){this.onFailureCallback();}},this.watchPosition=function(b,c,a){this.id=deviceapis.geolocation.watch.nextId;deviceapis.geolocation.watch.nextId++;this.onSuccessCallback=b;this.onFailureCallback=c;this.minNotificationInterval=1000;if(a!=null){this.minNotificationInterval=a.minNotificationInterval;}this._watchPositionLoop();},this._watchPositionLoop=function(){callDeviceAPI("GEOLOCATION","action=watch&id="+this.id+"&onSuccessCallback=deviceapis.geolocation._watchPosition&onFailureCallback=deviceapis.geolocation._watchPositionError");},this._watchPosition=function(f,g,a,c,b,e,d){if(this.onSuccessCallback!=null){this.onSuccessCallback(new Position(f,g,a,c,b,e,d));}},this._watchPositionError=function(){if(this.onFailureCallback!=null){this.onFailureCallback();}},this.clearWatch=function(a){this.callback=a;callDeviceAPI("GEOLOCATION","action=clear&id="+this.id+"&callback=deviceapis.geolocation._clearWatch");},this._clearWatch=function(){this.callback();};}deviceapis.geolocation=new Object();deviceapis.geolocation.get=new Object();deviceapis.geolocation.watch=new Object();deviceapis.geolocation.watch.nextId=0;deviceapis.geolocation.watch.geolocations=new Array();deviceapis.geolocation.getCurrentPosition=function(a,b){deviceapis.geolocation.get.geolocation=new Geolocation();deviceapis.geolocation.get.geolocation.getCurrentPosition(a,b);};deviceapis.geolocation._getCurrentPosition=function(f,g,a,c,b,e,d){deviceapis.geolocation.get.geolocation._getCurrentPosition(f,g,a,c,b,e,d);deviceapis.geolocation.get.geolocation=null;};deviceapis.geolocation._getCurrentPositionError=function(){deviceapis.geolocation.get.geolocation._getCurrentPositionError();deviceapis.geolocation.get.geolocation=null;};deviceapis.geolocation.watch._getIDIndex=function(b){for(var a=0;a<deviceapis.geolocation.watch.geolocations.length;a++){if(deviceapis.geolocation.watch.geolocations[a].id==b){return a;}}return -1;};deviceapis.geolocation.watchPosition=function(c,d,b){var a=new Geolocation();deviceapis.geolocation.watch.geolocations.push(a);a.watchPosition(c,d,b);return a.id;};deviceapis.geolocation._watchPositionLoop=function(c){var b=deviceapis.geolocation.watch._getIDIndex(c);if(b!=-1){var a=deviceapis.geolocation.watch.geolocations[b];a._watchPositionLoop();}};deviceapis.geolocation._watchPosition=function(b,a,j,e,i,c,d,h){var f=deviceapis.geolocation.watch._getIDIndex(b);if(f!=-1){var g=deviceapis.geolocation.watch.geolocations[f];g._watchPosition(a,j,e,i,c,d,h);setTimeout("deviceapis.geolocation._watchPositionLoop("+g.id+")",g.minNotificationInterval);}};deviceapis.geolocation._watchPositionError=function(c){var b=deviceapis.geolocation.watch._getIDIndex(c);if(b!=-1){var a=deviceapis.geolocation.watch.geolocations[b];a._watchPositionError();deviceapis.geolocation.watch.geolocations.splice(b,1);}};deviceapis.geolocation.clearWatch=function(d,c){var b=deviceapis.geolocation.watch._getIDIndex(d);if(b!=-1){var a=deviceapis.geolocation.watch.geolocations[b];a.clearWatch(c);}};deviceapis.geolocation._clearWatch=function(c){var b=deviceapis.geolocation.watch._getIDIndex(c);if(b!=-1){var a=deviceapis.geolocation.watch.geolocations[b];a._clearWatch();deviceapis.geolocation.watch.geolocations.splice(b,1);}};deviceapis.log=new Object();function LogConfiguration(a,b,e,d,c){this.status=a;this.persistence=b;this.level=e;this.maxlines=d;this.cleaning=c;}deviceapis.log.getConfiguration=function(a){deviceapis.log.getConfiguration._callback=a;callDeviceAPI("LOG","action=getConfiguration&callback=deviceapis.log._getConfiguration");};deviceapis.log._getConfiguration=function(a,b,e,d,c){if(deviceapis.log.getConfiguration._callback!=undefined){deviceapis.log.getConfiguration._callback(new LogConfiguration(a,b,e,d,c));}};deviceapis.log.setConfiguration=function(a,b,f,d,c,e){deviceapis.log.setConfiguration._callback=e;callDeviceAPI("LOG","action=setConfiguration&status="+a+"&persistence="+b+"&level="+f+"&maxlines="+d+"&cleaning="+c+"&callback=deviceapis.log._setConfiguration");};deviceapis.log._setConfiguration=function(){if(deviceapis.log.setConfiguration._callback!=undefined){deviceapis.log.setConfiguration._callback();}};deviceapis.log.start=function(a){deviceapis.log.start._callback=a;callDeviceAPI("LOG","action=start&callback=deviceapis.log._start");};deviceapis.log._start=function(){if(deviceapis.log.start._callback!=undefined){deviceapis.log.start._callback();}};deviceapis.log.stop=function(a){deviceapis.log.stop._callback=a;callDeviceAPI("LOG","action=stop&callback=deviceapis.log._stop");};deviceapis.log._stop=function(){if(deviceapis.log.stop._callback!=undefined){deviceapis.log.stop._callback();}};deviceapis.log.save=function(c,a,b){deviceapis.log.save._callback=b;callDeviceAPI("LOG","action=save&level="+c+"&log="+encodeURIComponent(a)+"&callback=deviceapis.log._save");};deviceapis.log._save=function(){if(deviceapis.log.save._callback!=undefined){deviceapis.log.save._callback();}};deviceapis.log.load=function(a){deviceapis.log.load._callback=a;callDeviceAPI("LOG","action=load&callback=deviceapis.log._load");};deviceapis.log._load=function(c){if(deviceapis.log.load._callback!=undefined){var a=new Array();var b=JSON.parse(c);if((b!=null)&&(b.logs!=null)){a=b.logs;}deviceapis.log.load._callback(a);}};deviceapis.log.clean=function(a){deviceapis.log.clean._callback=a;callDeviceAPI("LOG","action=clean&callback=deviceapis.log._clean");};deviceapis.log._clean=function(){if(deviceapis.log.clean._callback!=undefined){deviceapis.log.clean._callback();}};deviceapis.log.post=function(a,b){deviceapis.log.post._onSuccessCallback=a;deviceapis.log.post._onFailureCallback=b;callDeviceAPI("LOG","action=post&onSuccessCallback=deviceapis.log._post&onFailureCallback=deviceapis.log._postError");};deviceapis.log._post=function(){if(deviceapis.log.post._onSuccessCallback!=undefined){deviceapis.log.post._onSuccessCallback();}};deviceapis.log._postError=function(){if(deviceapis.log.post._onFailureCallback!=undefined){deviceapis.log.post._onFailureCallback();}};function Message(g,b,e,a,f,c,d){this.to=g;this.body=b;this.subject=e;this.attachments=a;this.cc=f;this.bcc=c;this.priority=d;this.isSMS=false;this.isMMS=false;this.isEmail=false;if((this.subject==null)&&(this.attachments==null)&&(this.cc==null)&&(this.bcc==null)&&(this.priority==null)){this.isSMS=true;}else{if((this.cc==null)&&(this.bcc==null)&&(this.priority==null)){this.isMMS=true;}else{this.isEmail=true;}}}deviceapis.messaging=new Object();deviceapis.messaging.findMessages=function(a,c,b){deviceapis.messaging.findMessages._onSuccessCallback=a;deviceapis.messaging.findMessages._onFailureCallback=c;callDeviceAPI("MESSAGING","onSuccessCallback=deviceapis.messaging._findMessages&onFailureCallback=deviceapis.messaging._findMessagesError&filter="+encodeURI(JSON.stringify(b)));};deviceapis.messaging._findMessages=function(b){var a=new Array();var c=JSON.parse(b);if((c!=null)&&(c.messages!=null)){a=c.messages;}deviceapis.messaging.findMessages._onSuccessCallback(a);};deviceapis.messaging._findMessagesError=function(){if(deviceapis.messaging.findMessages._onFailureCallback){deviceapis.messaging.findMessages._onFailureCallback();}};deviceapis.messaging.sendMessage=function(a,c,b){deviceapis.messaging.sendMessage._onSuccessCallback=a;deviceapis.messaging.sendMessage._onFailureCallback=c;callDeviceAPI("SMS","number="+encodeURIComponent(b.to)+"&message="+encodeURIComponent(b.body)+"&callback=deviceapis.messaging._sendMessage");};deviceapis.messaging._sendMessage=function(){deviceapis.messaging.sendMessage._onSuccessCallback();};deviceapis.messaging._sendMessageError=function(){deviceapis.messaging.sendMessage._onFailureCallback();};function CellularInformation(a,h,b,j,d,g,e,i,c,f){this.roaming=a;this.ip=h;this.name=b;this.mcc=j;this.mnc=d;this.lac=g;this.cellId=e;this.operatorName=i;this.operatorMcc=c;this.operatorMnc=f;}function WifiInformation(b,a){this.ip=b;this.ssid=a;}deviceapis.network=new Object();deviceapis.network.getType=function(a,b){deviceapis.network.getType._onSuccessCallback=a;deviceapis.network.getType._onFailureCallback=b;callDeviceAPI("NETWORK","action=getType&onSuccessCallback=deviceapis.network._getTypes&onFailureCallback=deviceapis.network._getTypesError");};deviceapis.network._getTypes=function(a){deviceapis.network.getType._onSuccessCallback(a);};deviceapis.network._getTypesError=function(a){if(deviceapis.network.getType._onFailureCallback!=undefined){deviceapis.network.getType._onFailureCallback(a);}};deviceapis.network.getCellularInfo=function(a,b){deviceapis.network.getCellularInfo._onSuccessCallback=a;deviceapis.network.getCellularInfo._onFailureCallback=b;callDeviceAPI("NETWORK","action=getCellularInfo&onSuccessCallback=deviceapis.network._getCellularInfo&onFailureCallback=deviceapis.network._getCellularInfoError");};deviceapis.network._getCellularInfo=function(a,h,b,j,d,g,e,i,c,f){deviceapis.network.getCellularInfo._onSuccessCallback(new CellularInformation(a,h,b,j,d,g,e,i,c,f));};deviceapis.network._getCellularInfoError=function(a){if(deviceapis.network.getCellularInfo._onFailureCallback!=undefined){deviceapis.network.getCellularInfo._onFailureCallback(a);}};deviceapis.network.getWifiInfo=function(a,b){deviceapis.network.getWifiInfo._onSuccessCallback=a;deviceapis.network.getWifiInfo._onFailureCallback=b;callDeviceAPI("NETWORK","action=getWifiInfo&onSuccessCallback=deviceapis.network._getWifiInfo&onFailureCallback=deviceapis.network._getWifiInfoError");};deviceapis.network._getWifiInfo=function(b,a){deviceapis.network.getWifiInfo._onSuccessCallback(new WifiInformation(b,a));};deviceapis.network._getWifiInfoError=function(a){if(deviceapis.network.getWifiInfo._onFailureCallback!=undefined){deviceapis.network.getWifiInfo._onFailureCallback(a);}};deviceapis.notification=new Object();deviceapis.notification.setUser=function(b,a,c){deviceapis.notification.setUser._onSuccessCallback=a;deviceapis.notification.setUser._onFailureCallback=c;callDeviceAPI("NOTIFICATION","action=setUser&userID="+encodeURIComponent(b)+"&onSuccessCallback=deviceapis.notification._setUser&onFailureCallback=deviceapis.notification._setUserError");};deviceapis.notification._setUser=function(){if(deviceapis.notification.setUser._onSuccessCallback!=undefined){deviceapis.notification.setUser._onSuccessCallback();}};deviceapis.notification._setUserError=function(){if(deviceapis.notification.setUser._onFailureCallback!=undefined){deviceapis.notification.setUser._onFailureCallback();}};deviceapis.notification.getUser=function(a){deviceapis.notification.getUser._callback=a;callDeviceAPI("NOTIFICATION","action=getUser&callback=deviceapis.notification._getUser");};deviceapis.notification._getUser=function(a){deviceapis.notification.getUser._callback(a);};deviceapis.notification.register=function(a,b,c){deviceapis.notification.register._onSuccessCallback=b;deviceapis.notification.register._onFailureCallback=c;callDeviceAPI("NOTIFICATION","action=register&sessionToken="+encodeURIComponent(a)+"&onSuccessCallback=deviceapis.notification._register&onFailureCallback=deviceapis.notification._registerError");};deviceapis.notification._register=function(){if(deviceapis.notification.register._onSuccessCallback!=undefined){deviceapis.notification.register._onSuccessCallback();}};deviceapis.notification._registerError=function(){if(deviceapis.notification.register._onFailureCallback!=undefined){deviceapis.notification.register._onFailureCallback();}};deviceapis.notification.registerTypes=function(b,a,c){deviceapis.notification.registerTypes._onSuccessCallback=a;deviceapis.notification.registerTypes._onFailureCallback=c;callDeviceAPI("NOTIFICATION","action=registerTypes&types="+b+"&onSuccessCallback=deviceapis.notification._registerTypes&onFailureCallback=deviceapis.notification._registerTypesError");};deviceapis.notification._registerTypes=function(){if(deviceapis.notification.registerTypes._onSuccessCallback!=undefined){deviceapis.notification.registerTypes._onSuccessCallback();}};deviceapis.notification._registerTypesError=function(a){if(deviceapis.notification.registerTypes._onFailureCallback!=undefined){deviceapis.notification.registerTypes._onFailureCallback(a);}};deviceapis.notification.unregisterTypes=function(b,a,c){deviceapis.notification.unregisterTypes._onSuccessCallback=a;deviceapis.notification.unregisterTypes._onFailureCallback=c;callDeviceAPI("NOTIFICATION","action=unregisterTypes&types="+b+"&onSuccessCallback=deviceapis.notification._unregisterTypes&onFailureCallback=deviceapis.notification._unregisterTypesError");};deviceapis.notification._unregisterTypes=function(){if(deviceapis.notification.unregisterTypes._onSuccessCallback!=undefined){deviceapis.notification.unregisterTypes._onSuccessCallback();}};deviceapis.notification._unregisterTypesError=function(){if(deviceapis.notification.unregisterTypes._onFailureCallback!=undefined){deviceapis.notification.unregisterTypes._onFailureCallback();}};deviceapis.notification.getRegisteredTypes=function(a){deviceapis.notification.getRegisteredTypes._callback=a;callDeviceAPI("NOTIFICATION","action=getRegisteredTypes&callback=deviceapis.notification._getRegisteredTypes");};deviceapis.notification._getRegisteredTypes=function(a){deviceapis.notification.getRegisteredTypes._callback(a.split(","));};deviceapis.notification.registerCallbacks=function(a){var c=[];for(var b=0;b<a.length;b++){c.push(a[b].name);}callDeviceAPI("NOTIFICATION","action=registerCallbacks&callbacks="+c);};deviceapis.notification.unregisterCallbacks=function(a){var c=[];for(var b=0;b<a.length;b++){c.push(a[b].name);}callDeviceAPI("NOTIFICATION","action=unregisterCallbacks&callbacks="+c);};deviceapis.notification._receive=function(data,callbacks){var callbacksArray=callbacks.split(",");var callbacksNumber=callbacksArray.length;for(var callbackIndex=0;callbackIndex<callbacksNumber;callbackIndex++){eval(callbacksArray[callbackIndex]+"('"+data+"')");}};deviceapis.open=function(a){callDeviceAPI("WAP","url="+encodeURIComponent(a));};function Rotation(f,d,c,e,a,h,b,g){this.alpha=a;this.beta=h;this.gamma=b;}function Orientation(){this.getCurrentOrientation=function(a,b){this.onSuccessCallback=a;this.onFailureCallback=b;callDeviceAPI("ORIENTATION","action=get&onSuccessCallback=deviceapis.orientation._getCurrentOrientation&onFailureCallback=deviceapis.orientation._getCurrentOrientationError");},this._getCurrentOrientation=function(f,d,c,e,a,h,b,g){if(this.onSuccessCallback!=null){this.onSuccessCallback(new Rotation(f,d,c,e,a,h,b,g));}},this._getCurrentOrientationError=function(a){if(this.onFailureCallback!=null){this.onFailureCallback(a);}},this.watchOrientation=function(b,c,a){this.id=deviceapis.orientation.watch.nextId;deviceapis.orientation.watch.nextId++;this.onSuccessCallback=b;this.onFailureCallback=c;this.minNotificationInterval=1000;if(a!=null){this.minNotificationInterval=a.minNotificationInterval;}this._watchOrientationLoop();},this._watchOrientationLoop=function(){callDeviceAPI("ORIENTATION","action=watch&id="+this.id+"&onSuccessCallback=deviceapis.orientation._watchOrientation&onFailureCallback=deviceapis.orientation._watchOrientationError");},this._watchOrientation=function(f,d,c,e,a,h,b,g){if(this.onSuccessCallback!=null){this.onSuccessCallback(new Rotation(f,d,c,e,a,h,b,g));}},this._watchOrientationError=function(a){if(this.onFailureCallback!=null){this.onFailureCallback(a);}},this.clearWatch=function(a){this.callback=a;callDeviceAPI("ORIENTATION","action=clear&id="+this.id+"&callback=deviceapis.orientation._clearWatch");},this._clearWatch=function(){this.callback();};}deviceapis.orientation=new Object();deviceapis.orientation.get=new Object();deviceapis.orientation.watch=new Object();deviceapis.orientation.watch.nextId=0;deviceapis.orientation.watch.orientations=new Array();deviceapis.orientation.getCurrentOrientation=function(a,b){deviceapis.orientation.get.orientation=new Orientation();deviceapis.orientation.get.orientation.getCurrentOrientation(a,b);};deviceapis.orientation._getCurrentOrientation=function(f,d,c,e,a,h,b,g){deviceapis.orientation.get.orientation._getCurrentOrientation(f,d,c,e,a,h,b,g);deviceapis.orientation.get.orientation=null;};deviceapis.orientation._getCurrentOrientationError=function(a){deviceapis.orientation.get.orientation._getCurrentOrientationError(a);deviceapis.orientation.get.orientation=null;};deviceapis.orientation.watch._getIDIndex=function(b){for(var a=0;a<deviceapis.orientation.watch.orientations.length;a++){if(deviceapis.orientation.watch.orientations[a].id==b){return a;}}return -1;};deviceapis.orientation.watchOrientation=function(c,d,b){var a=new Orientation();deviceapis.orientation.watch.orientations.push(a);a.watchOrientation(c,d,b);return a.id;};deviceapis.orientation._watchOrientationLoop=function(c){var b=deviceapis.orientation.watch._getIDIndex(c);if(b!=-1){var a=deviceapis.orientation.watch.orientations[b];a._watchOrientationLoop();}};deviceapis.orientation._watchOrientation=function(c,k,j,i,a,g,d,e,f){var h=deviceapis.orientation.watch._getIDIndex(c);if(h!=-1){var b=deviceapis.orientation.watch.orientations[h];b._watchOrientation(k,j,i,a,g,d,e,f);setTimeout("deviceapis.orientation._watchOrientationLoop("+b.id+")",b.minNotificationInterval);}};deviceapis.orientation._watchOrientationError=function(d,c){var b=deviceapis.orientation.watch._getIDIndex(d);if(b!=-1){var a=deviceapis.orientation.watch.orientations[b];a._watchOrientationError(c);deviceapis.orientation.watch.orientations.splice(b,1);}};deviceapis.orientation.clearWatch=function(d,c){var b=deviceapis.orientation.watch._getIDIndex(d);if(b!=-1){var a=deviceapis.orientation.watch.orientations[b];a.clearWatch(c);}};deviceapis.orientation._clearWatch=function(c){var b=deviceapis.orientation.watch._getIDIndex(c);if(b!=-1){var a=deviceapis.orientation.watch.orientations[b];a._clearWatch();deviceapis.orientation.watch.orientations.splice(b,1);}};deviceapis.quit=function(){callDeviceAPI("QUIT","");};deviceapis.securestorage={onSuccessCallback:undefined,onFailureCallback:undefined,_onSuccessCallback:function(a){var b=this.onSuccessCallback;this.onSuccessCallback=undefined;this.onFailureCallback=undefined;if(b){b(a);}},_onFailureCallback:function(a){var b=this.onFailureCallback;this.onSuccessCallback=undefined;this.onFailureCallback=undefined;if(b){b(a);}},_computeOrigin:function(e){var g=e.indexOf("://",0)+3;var d=e.substr(0,g-3);if(d!="file"){var c=e.indexOf("/",g);var f=e.substr(g,c-g);var b="80";var a=e.indexOf(":",g);if((-1!=a)&&(a<c)){b=e.substr(a+1,c-a-1);f=e.substr(g,a-g);}d+="_"+f+"_"+b;}return d;},callDeviceAPI:function(c,b,a,d){this.onSuccessCallback=a;this.onFailureCallback=d;b.origin=this._computeOrigin(document.location.href);b.onSuccess="deviceapis.securestorage._onSuccessCallback";b.onError="deviceapis.securestorage._onFailureCallback";callDeviceAPI("WEBCMD.SECURESTORAGE","pipeJS=deviceapis._calls.next()&"+c+"="+encodeURIComponent(JSON.stringify(b)));}};deviceapis.securestorage.open=function(b,a,d){if((b==undefined)||(b==null)||(b=="")){if(d){d();}return;}var c={developerKey:b};this.callDeviceAPI("open",c,a,d);};deviceapis.securestorage.close=function(a,b){this.callDeviceAPI("close",{},a,b);};deviceapis.securestorage.migrate=function(b,a,d){if((b==undefined)||(b==null)||(b=="")){if(d){d();}return;}var c={developerKey:b};this.callDeviceAPI("migrate",c,a,d);};deviceapis.securestorage.getItem=function(b,a,d){if((b==undefined)||(b==null)||(b=="")||!a){if(d){d();}return;}var c={key:b};this.callDeviceAPI("getItem",c,a,d);};deviceapis.securestorage.setItem=function(b,d,a,e){if((b==undefined)||(b==null)||(b=="")||(d==undefined)||(d==null)||(d=="")){if(e){e();}return;}var c={key:b,value:d};this.callDeviceAPI("setItem",c,a,e);};deviceapis.securestorage.removeItem=function(b,a,d){if((b==undefined)||(b==null)||(b=="")){if(d){d();}return;}var c={key:b};this.callDeviceAPI("removeItem",c,a,d);};deviceapis.securestorage.clear=function(a,b){this.callDeviceAPI("clear",{},a,b);};deviceapis.system=new Object();deviceapis.system.getFontScale=function(a,b){deviceapis.system.getFontScale._onSuccessCallback=a;deviceapis.system.getFontScale._onFailureCallback=b;callDeviceAPI("SYSTEM","onSuccessCallback=deviceapis.system._getFontScale&onFailureCallback=deviceapis.system._getFontScaleError");};deviceapis.system._getFontScale=function(a){if(deviceapis.system.getFontScale._onSuccessCallback!=undefined){deviceapis.system.getFontScale._onSuccessCallback(a);}};deviceapis.system._getFontScaleError=function(){if(deviceapis.system.getFontScale._onFailureCallback!=undefined){deviceapis.system.getFontScale._onFailureCallback();}};deviceapis.tracking=new Object();function TrackingConfiguration(a,b,d,c){this.status=a;this.persistence=b;this.maxlines=d;this.cleaning=c;}deviceapis.tracking.getConfiguration=function(a){deviceapis.tracking.getConfiguration._callback=a;callDeviceAPI("TRACKING","action=getConfiguration&callback=deviceapis.tracking._getConfiguration");};deviceapis.tracking._getConfiguration=function(a,b,d,c){if(deviceapis.tracking.getConfiguration._callback!=undefined){deviceapis.tracking.getConfiguration._callback(new TrackingConfiguration(a,b,d,c));}};deviceapis.tracking.setConfiguration=function(a,b,d,c,e){deviceapis.tracking.setConfiguration._callback=e;callDeviceAPI("TRACKING","action=setConfiguration&status="+a+"&persistence="+b+"&maxlines="+d+"&cleaning="+c+"&callback=deviceapis.tracking._setConfiguration");};deviceapis.tracking._setConfiguration=function(){if(deviceapis.tracking.setConfiguration._callback!=undefined){deviceapis.tracking.setConfiguration._callback();}};deviceapis.tracking.start=function(a){deviceapis.tracking.start._callback=a;callDeviceAPI("TRACKING","action=start&callback=deviceapis.tracking._start");};deviceapis.tracking._start=function(){if(deviceapis.tracking.start._callback!=undefined){deviceapis.tracking.start._callback();}};deviceapis.tracking.stop=function(a){deviceapis.tracking.stop._callback=a;callDeviceAPI("TRACKING","action=stop&callback=deviceapis.tracking._stop");};deviceapis.tracking._stop=function(){if(deviceapis.tracking.stop._callback!=undefined){deviceapis.tracking.stop._callback();}};deviceapis.tracking.trackScreenView=function(a,b){deviceapis.tracking.trackScreenView._callback=b;callDeviceAPI("TRACKING","action=trackScreenView&screenName="+encodeURIComponent(a)+"&callback=deviceapis.tracking._trackScreenView");};deviceapis.tracking._trackScreenView=function(){if(deviceapis.tracking.trackScreenView._callback!=undefined){deviceapis.tracking.trackScreenView._callback();}};deviceapis.tracking.trackEvent=function(b,a,c){deviceapis.tracking.trackEvent._callback=c;callDeviceAPI("TRACKING","action=trackEvent&category="+encodeURIComponent(b)+"&taction="+encodeURIComponent(a)+"&callback=deviceapis.tracking._trackEvent");};deviceapis.tracking._trackEvent=function(){if(deviceapis.tracking.trackEvent._callback!=undefined){deviceapis.tracking.trackEvent._callback();}};deviceapis.tracking.load=function(a){deviceapis.tracking.load._callback=a;callDeviceAPI("TRACKING","action=load&callback=deviceapis.tracking._load");};deviceapis.tracking._load=function(c){if(deviceapis.tracking.load._callback!=undefined){var a=new Array();var b=JSON.parse(c);if((b!=null)&&(b.tracking!=null)){a=b.tracking;}deviceapis.tracking.load._callback(a);}};deviceapis.tracking.clean=function(a){deviceapis.tracking.clean._callback=a;callDeviceAPI("TRACKING","action=clean&callback=deviceapis.tracking._clean");};deviceapis.tracking._clean=function(){if(deviceapis.tracking.clean._callback!=undefined){deviceapis.tracking.clean._callback();}};deviceapis.tracking.post=function(a,b){deviceapis.tracking.post._onSuccessCallback=a;deviceapis.tracking.post._onFailureCallback=b;callDeviceAPI("TRACKING","action=post&onSuccessCallback=deviceapis.tracking._post&onFailureCallback=deviceapis.tracking._postError");};deviceapis.tracking._post=function(){if(deviceapis.tracking.post._onSuccessCallback!=undefined){deviceapis.tracking.post._onSuccessCallback();}};deviceapis.tracking._postError=function(){if(deviceapis.tracking.post._onFailureCallback!=undefined){deviceapis.tracking.post._onFailureCallback();}};deviceapis.webview=new Object();deviceapis.webview.statusbar=new Object();deviceapis.webview.statusbar.networkactivityindicator=new Object();deviceapis.webview.screenorientation=new Object();deviceapis.webview.statusbar.show=function(){callDeviceAPI("STATUSBAR","action=on");};deviceapis.webview.statusbar.hide=function(){callDeviceAPI("STATUSBAR","action=off");};deviceapis.webview.statusbar.networkactivityindicator.show=function(){callDeviceAPI("NETWORKACTIVITYINDICATOR","action=on");};deviceapis.webview.statusbar.networkactivityindicator.hide=function(){callDeviceAPI("NETWORKACTIVITYINDICATOR","action=off");};deviceapis.webview.screenorientation.lock=function(){callDeviceAPI("SCREENORIENTATION","action=off");};deviceapis.webview.screenorientation.unlock=function(){callDeviceAPI("SCREENORIENTATION","action=on");};deviceapis.webview.screenorientation.set=function(a){callDeviceAPI("SCREENORIENTATION","action="+a);};deviceapis.utils=new Object();deviceapis.utils._imageAdaptorURL="http://ia.pve2.streamezzo.com/imageadaptor/adapt/json";deviceapis._utils.escapeString=function(a){return a.replace(new RegExp("\\\\","g"),"\\\\").replace(new RegExp('"',"g"),'\\"').replace(new RegExp("'","g"),"\\'");};deviceapis.utils.base64=new Object();deviceapis.utils.base64._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";deviceapis.utils.base64.encode=function(c){var b="";var k,h,f="";var j,g,e,d="";var a=0;do{k=c[a++];h=c[a++];f=c[a++];j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64;}else{if(isNaN(f)){d=64;}}b=b+deviceapis.utils.base64._keyStr.charAt(j)+deviceapis.utils.base64._keyStr.charAt(g)+deviceapis.utils.base64._keyStr.charAt(e)+deviceapis.utils.base64._keyStr.charAt(d);k=h=f="";j=g=e=d="";}while(a<c.length);return b;};deviceapis.utils.base64.decode=function(b){var c=[];var k,h,f="";var j,g,e,d="";var a=0;do{j=deviceapis.utils.base64._keyStr.indexOf(b.charAt(a++));g=deviceapis.utils.base64._keyStr.indexOf(b.charAt(a++));e=deviceapis.utils.base64._keyStr.indexOf(b.charAt(a++));d=deviceapis.utils.base64._keyStr.indexOf(b.charAt(a++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;c.push(k);if(e!=64){c.push(h);}if(d!=64){c.push(f);}k=h=f="";j=g=e=d="";}while(a<b.length);return c;};deviceapis._utils.getParameterValue=function(b,a){var d=b.indexOf(a,0);if(d==-1){return null;}d+=a.length+1;var c=b.indexOf("&",d);if(c==-1){c=b.length;}return b.substring(d,c);};deviceapis._utils.matchFilter=function(b,c){if((c==null)||(c=="undefined")){return true;}if((b==null)||(b=="undefined")){return false;}var a=c.split("%");if(a.length==1){return b.toLowerCase()==c.toLowerCase();}if((a.length==2)&&(a[1]=="")){filterPattern="^"+a[0];}else{if((a.length==2)&&(a[0]=="")){filterPattern=a[1]+"$";}else{if((a.length==3)&&(a[0]=="")&&(a[2]=="")){filterPattern=a[1]+"+";}}}return b.match(new RegExp(filterPattern,"gi"))!=null;};deviceapis._utils.matchFilterInList=function(list,name,filter){if((filter==null)||(filter=="undefined")){return true;}if((list==null)||(list.length==0)){return false;}var filterArray=filter.split("%");if(filterArray.length==1){return string.toLowerCase()==filter.toLowerCase();}if((filterArray.length==2)&&(filterArray[1]=="")){filterPattern="^"+filterArray[0];}else{if((filterArray.length==2)&&(filterArray[0]=="")){filterPattern=filterArray[1]+"$";}else{if((filterArray.length==3)&&(filterArray[0]=="")&&(filterArray[2]=="")){filterPattern=filterArray[1]+"+";}}}var itemsNumber=list.length;for(var itemIndex=0;itemIndex<itemsNumber;itemIndex++){var item=eval("list["+itemIndex+"]."+name);if(item.match(new RegExp(filterPattern,"gi"))!=null){return true;}}return false;};deviceapis._utils.injectJSFile=function(a,b){callDeviceAPI("INJECTJSFILE","url="+encodeURIComponent(a)+"&file="+b);};deviceapis._utils.createCORSRequest=function(c,a){var b=new XMLHttpRequest();if("withCredentials" in b){b.open(c,a,true);}else{if(typeof XDomainRequest!="undefined"){b=new XDomainRequest();b.open(c,a);}else{b=null;}}return b;};deviceapis.utils.getImage=function(b,a,c,i,g,f,h,e){var j="{";j+='"url":"'+a+'"';j+=",";j+='"width":'+c;j+=",";j+='"height":'+i;j+=",";j+='"unit":"'+g+'"';j+=",";j+='"boxfit":"'+f+'"';j+=",";j+='"resolution":['+deviceapis.device._properties.screenWidth+","+deviceapis.device._properties.screenHeight+"]";j+=",";j+='"diagonal":"'+deviceapis.device._properties.screenDiagonalSize+'"';j+="}";var d=deviceapis._utils.createCORSRequest("POST",deviceapis.utils._imageAdaptorURL);d.onload=function(){var k=JSON.parse(d.responseText);var l=document.getElementById(b);l.style.visibility="visible";l.src="data:image/"+k.format+";base64,"+k.data;if(h!=undefined){h();}};d.onerror=function(){var k=document.getElementById(b);k.style.visibility="hidden";k.src="";if(e!=undefined){e();}};d.send(j);};deviceapis.utils.datepicker=new Object();deviceapis.utils.datepicker._displayed=false;deviceapis.utils.datepicker.display=function(a,b,e,f,d){if(!deviceapis.browserinfo.isiOS&&!deviceapis.utils.datepicker._displayed){deviceapis.utils.datepicker._displayed=true;a.blur();deviceapis.utils.datepicker.input=a;deviceapis.utils.datepicker.onSuccessCallback=b;deviceapis.utils.datepicker.onCancelCallback=e;deviceapis.utils.datepicker.onFailureCallback=f;var c;if(d!=undefined){c=d.toUpperCase();}else{c=a.getAttribute("type").toUpperCase();}if(deviceapis.browserinfo.isWindowsPhone){if(a.value==null||a.value==""){if(c=="date"){a.value=new Date().toJSON().slice(0,10);}else{if(c=="time"){a.value=new Date().toJSON().slice(11,16);}}}}callDeviceAPI("DATEPICKER","type="+c+"&value="+a.value+"&minvalue="+a.min+"&maxvalue="+a.max+"&onSuccessCallback=deviceapis.utils.datepicker._display&onCancelCallback=deviceapis.utils.datepicker._displayCancel&onFailureCallback=deviceapis.utils.datepicker._displayError");}};deviceapis.utils.datepicker._display=function(a){deviceapis.utils.datepicker.input.value=a;if(deviceapis.utils.datepicker.onSuccessCallback!=undefined){deviceapis.utils.datepicker.onSuccessCallback(a);}deviceapis.utils.datepicker._displayed=false;};deviceapis.utils.datepicker._displayCancel=function(){if(deviceapis.utils.datepicker.onCancelCallback!=undefined){deviceapis.utils.datepicker.onCancelCallback();}deviceapis.utils.datepicker._displayed=false;};deviceapis.utils.datepicker._displayError=function(){if(deviceapis.utils.datepicker.onFailureCallback!=undefined){deviceapis.utils.datepicker.onFailureCallback();}deviceapis.utils.datepicker._displayed=false;};deviceapis._onload=function(){deviceapis.application.getID(deviceapis._onload1);};deviceapis._onload1=function(){deviceapis.application.getVersion(deviceapis._onload2);};deviceapis._onload2=function(){deviceapis.device.getProperties(deviceapis._onload3);};deviceapis._onload3=function(){if(deviceapis.googleanalytics==undefined){deviceapis._engine.getProperties(deviceapis._setReady);}else{deviceapis._engine.getProperties(deviceapis._onloadGA);}};deviceapis._onloadGA=function(){deviceapis.context.load("gaclientid",deviceapis._startInitGA);};deviceapis._startInitGA=function(a){if(a!=""){deviceapis.googleanalytics.clientID=a;deviceapis._endInitGA();}else{deviceapis.googleanalytics.clientID=deviceapis.googleanalytics._generateClientID();deviceapis.context.save("gaclientid",deviceapis.googleanalytics.clientID,deviceapis._endInitGA);}};deviceapis._endInitGA=function(){deviceapis._setReady();};if(/complete|loaded|interactive/.test(document.readyState)){deviceapis._onload();}else{document.addEventListener("DOMContentLoaded",deviceapis._onload,false);}